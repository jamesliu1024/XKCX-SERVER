# 高校门禁预约系统需求文档

## 1. 系统概述

### 1.1 项目背景
为规范校园访客管理、提高安保效率、实现智能化门禁控制,开发本系统。系统采用RFID技术进行身份识别,通过预约管理确保校园安全。

### 1.2 项目目标
- 实现访客预约全流程管理
- 提供便捷的RFID门禁控制
- 支持实时监控和数据分析
- 确保校园安全和访客便利性的平衡

## 2. 功能需求

### 2.1 访客模块
#### 2.1.1 访客信息管理
- 访客基本信息登记
  - 姓名、电话、证件类型及号码
  - 访问事由、被访部门及人员
  - 微信账号绑定(选填)
- 信息状态维护
  - 待审核/已通过/已过期 状态管理
  - 访问有效期设置与控制

#### 2.1.2 预约管理
- 预约申请
  - 选择预约时间段(start_time - end_time)
  - 填写访问信息
  - 提交预约申请
- 预约状态跟踪
  - 待确认/已确认/已使用/已取消 状态显示
  - 被访人确认机制
  - 预约到期自动失效

### 2.2 门禁控制模块
#### 2.2.1 设备管理
- 门禁设备分类
  - 校园大门
  - 设施门禁
  - 管理设备
- 设备状态监控
  - 在线/离线/维护中 状态显示
  - IP地址管理
  - 位置信息管理

#### 2.2.2 RFID卡片管理
- 卡片生命周期
  - 可用/已发放/丢失/已停用 状态管理
  - 发卡和回收记录
  - 有效期控制
- 卡片使用记录
  - 关联预约信息
  - 操作管理员记录
  - 备注信息维护

### 2.3 安全控制模块
#### 2.3.1 进出权限控制
- 时间控制
  - 仅允许在预约时间段内进入
  - 离开时间不受限制
- 结果记录
  - 进出类型(进入/离开)
  - 访问结果(允许/拒绝)
  - 详细原因记录

#### 2.3.2 配额管理
- 每日预约配额
  - 设置每日最大预约数量
  - 自动控制预约人数
- 人流预测
  - 基于历史数据预测人流量
  - 辅助配额动态调整

### 2.4 数据分析模块
#### 2.4.1 操作日志
- 管理员操作记录
  - 操作类型与时间
  - 操作对象与结果
  - 详细信息JSON存储
- 设备通信日志
  - MQTT消息记录
  - 设备状态变更
  - 通信故障跟踪

#### 2.4.2 统计分析
- 访问数据统计
  - 日/周/月访问量统计
  - 各门禁点使用频率分析
  - 预约转化率统计
- 预测分析
  - 人流量趋势预测
  - 异常行为识别
  - 智能配额建议

## 3. 非功能需求

### 3.1 性能需求
- 响应时间：门禁验证响应时间<1秒
- 并发处理：支持100+并发预约请求
- 数据存储：支持3年以上历史数据存储

### 3.2 安全需求
- 数据加密：RFID卡片数据加密存储
- 访问控制：基于角色的权限管理
- 日志审计：关键操作全程记录

### 3.3 可用性需求
- 系统可用性：99.9%运行时间
- 故障恢复：支持数据自动备份和快速恢复
- 维护方便：支持在线更新和远程维护

## 4. 接口需求

### 4.1 外部接口
- 微信小程序接口
- Web前端接口
- 硬件设备MQTT接口

### 4.2 内部接口
- 数据库访问接口
- 服务间通信接口
- 消息队列接口